<!doctype html>
<html>
  <head>
    <script type="importmap">
      {
        "imports": {
          "p2p-media-loader-core": "./core/p2p-media-loader-core.es.js",
          "p2p-media-loader-hlsjs": "./hlsjs/p2p-media-loader-hlsjs.es.js"
        }
      }
    </script>

    <script src="https://cdn.jsdelivr.net/npm/hls.js@~1/dist/hls.min.js"></script>

    <script type="module">
      import { Engine as HlsEngine } from "p2p-media-loader-hlsjs";

      // Override default Hls.js engine with P2P enabled engine
      // This instance will be used by all <vm-hls> elements
      window.Hls = HlsEngine.createP2PHlsClass();

      // Configure Hls.js and P2P engine for all <vm-hls> elements
      document.querySelectorAll("vm-hls").forEach(
        (vmHls) =>
          (vmHls.config = {
            startLevel: 0, // example of Hls.js config value

            // ... other Hls.js config values go here

            // example of P2P engine config section
            p2p: {
              core: {
                swarmId: "custom swarm ID 959483 for stream x36xhzz",
              },
            },
          }),
      );
    </script>

    <script
      defer
      type="module"
      src="https://cdn.jsdelivr.net/npm/@vime/core@^5/dist/vime/vime.esm.js"
    ></script>
  </head>

  <body>
    <div style="width: 600px">
      <vm-player controls autopause="false">
        <vm-hls>
          <source
            data-src="https://Test-streams.mux.dev/x36xhzz/x36xhzz.m3u8"
            type="application/x-mpegURL"
          />
        </vm-hls>
      </vm-player>

      <vm-player controls autopause="false">
        <vm-hls>
          <source
            data-src="https://Test-streams.mux.dev/x36xhzz/x36xhzz.m3u8"
            type="application/x-mpegURL"
          />
        </vm-hls>
      </vm-player>
    </div>
  </body>
</html>
